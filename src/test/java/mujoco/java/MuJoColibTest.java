/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package mujoco.java;

import org.junit.Test;
import org.mujoco.MuJoCoLib;
import org.mujoco.MuJoCoLib.mjData;
import org.mujoco.MuJoCoLib.mjData_;
import org.mujoco.MuJoCoLib.mjModel;
import org.mujoco.MuJoCoLib.mjModel_;
import org.mujoco.MuJoCoLib.mjVFS;
import org.mujoco.MuJoCoModelManager;

import static org.junit.Assert.*;

import java.io.File;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;

import org.bytedeco.javacpp.Loader;
import org.bytedeco.javacpp.annotation.Cast;
import org.bytedeco.javacpp.annotation.Const;

public class MuJoColibTest {
	@Test
	public void mujocoJNILoadTest() throws IOException {
		System.out.println(System.getProperty("org.bytedeco.javacpp.logger.debug"));
		System.setProperty("org.bytedeco.javacpp.logger.debug", "true");

		System.out.println("Starting " + MuJoCoLib.mj_versionString().getString());

		MuJoCoModelManager manager = new MuJoCoModelManager("humanoid/humanoid.xml");
		//MuJoCoModelManager manager = new MuJoCoModelManager(new File("/home/hephaestus/git/mujoco-java/model/humanoid/humanoid.xml"));

		try {
			mjModel_ Maccessable = manager.getModel();
			mjData_ accessable = manager.getData();
			System.out.println("Run model for 10 seconds");
			while (accessable.time() < 10) {
				manager.stepOne();
				manager.stepTwo();
				Thread.sleep(1);
			}
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		System.out.println("Clean up data objects");
		manager.close();
	}
}
