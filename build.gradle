/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java application project to get you started.
 * For more details take a look at the 'Building Java & JVM projects' chapter in the Gradle
 * User Manual available at https://docs.gradle.org/7.2/userguide/building_java_projects.html
 */

plugins {
	id 'eclipse'
	id 'java'
	id 'maven-publish'
	id 'signing'
	id 'io.codearte.nexus-staging' version '0.30.0'

}

repositories {
	// Use Maven Central for resolving dependencies.
	mavenCentral()
}

dependencies {
	// Use JUnit test framework.
	testImplementation 'junit:junit:4.13.2'
	implementation group: 'org.bytedeco', name: 'javacpp', version: '1.5.7'
	// https://mvnrepository.com/artifact/javax.xml.bind/jaxb-api
	implementation group: 'javax.xml.bind', name: 'jaxb-api', version: '2.3.1'
	
	// https://mvnrepository.com/artifact/net.codesup.util/jaxb2-rich-contract-plugin
	implementation group: 'net.codesup.util', name: 'jaxb2-rich-contract-plugin', version: '2.1.0'
	
}
if(JavaVersion.current() != JavaVersion.VERSION_1_8){
	throw new GradleException("This build must be run with java 8")
}


group='com.neuronrobotics'
archivesBaseName='mujoco-java'
version = System.getenv("VERSION_SEMVER")

nexusStaging {
	packageGroup = 'com.neuronrobotics' 
	serverUrl='https://oss.sonatype.org/service/local/'
	username = System.getenv("MAVEN_USERNAME")
	password = System.getenv("MAVEN_PASSWORD")
}

publishing {

	repositories {
//		maven {
//			name = 'GitHubPackages'
//			url = uri("https://maven.pkg.github.com/CommonWealthRobotics/mujoco-java")
//			credentials {
//				username = System.getenv("GITHUB_ACTOR")
//				password = System.getenv("GITHUB_TOKEN")
//			}
//		}
		maven {
			name = "OSSRH"
			url = "https://oss.sonatype.org/service/local/staging/deploy/maven2/"
			credentials {
				username = System.getenv("MAVEN_USERNAME")
				password = System.getenv("MAVEN_PASSWORD")
			}
		}
	}
	publications {
		mavenJava(MavenPublication) {
			from components.java
			pom {
				name= 'mujoco java'
				packaging ='jar'
				// optionally artifactId can be defined here
				description ='Java bindings for MuJoCo Physics library'
				url= 'http://github.com:CommonWealthRobotics/mujoco-java'

				scm {
					connection 			='scm:git:https://github.com/CommonWealthRobotics/mujoco-java'
					developerConnection ='scm:git:git@github.com:CommonWealthRobotics/mujoco-java.git'
					url ='https://github.com/CommonWealthRobotics/mujoco-java'
				}

				licenses {
					license {
						name= 'The Apache License, Version 2.0'
						url ='http://www.apache.org/licenses/LICENSE-2.0.txt'
					}
				}

				developers {
					developer {
						id ='madhephaestus'
						name= 'Kevin Harrington'
						email= 'kharrington@neuronrobotics.com'
					}
				}
			}
		}
	}
}

java {
	withJavadocJar()
	withSourcesJar()
}

signing {
	sign publishing.publications.mavenJava
}


javadoc {
	if(JavaVersion.current().isJava9Compatible()) {
		options.addBooleanOption('html5', true)
	}
}
